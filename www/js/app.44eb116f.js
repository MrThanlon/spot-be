(function(t){function e(e){for(var n,r,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)r=i[d],a[r]&&p.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={app:0},o=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/www/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("64a9"),a=s.n(n);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{attrs:{id:"nav"}},[s("router-link",{attrs:{to:"/"}},[t._v("Display")]),t._v(" |\n    "),s("router-link",{attrs:{to:"/ctr"}},[t._v("Console")])],1),s("router-view")],1)},o=[],r=(s("034f"),s("2877")),i={},c=Object(r["a"])(i,a,o,!1,null,null,null),u=c.exports,l=(s("ab8b"),s("4989"),s("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:s("cf05")}}),n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},p=[],v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[s("h1",[t._v(t._s(t.msg))]),t._m(0),s("h3",[t._v("Installed CLI Plugins")]),t._m(1),s("h3",[t._v("Essential Links")]),t._m(2),s("h3",[t._v("Ecosystem")]),t._m(3)])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n    For a guide and recipes on how to configure / customize this project,"),s("br"),t._v("\n    check out the\n    "),s("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),s("li",[s("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),s("li",[s("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),s("li",[s("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),s("li",[s("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),s("li",[s("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),s("li",[s("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],_={name:"HelloWorld",props:{msg:String}},h=_,f=(s("c6fc"),Object(r["a"])(h,v,m,!1,null,"5289da79",null)),g=f.exports,b={name:"home",components:{HelloWorld:g}},w=b,C=Object(r["a"])(w,d,p,!1,null,null,null),y=(C.exports,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container container-fluid"},[s("div",{staticClass:"card shadow"},[s("div",{staticClass:"card-header"},[s("h3",{staticClass:"card-title mb-0"},[t._v("\n                "+t._s(t.stat_text)+"\n            ")])]),s("div",{staticClass:"card-body"},[0!==t.stat&&3!==t.stat?s("div",{staticClass:"progress mb-5",staticStyle:{height:"30px","font-size":"30px"}},[s("div",{staticClass:"progress-bar",class:[1===t.stat?"bg-danger":2===t.stat?"bg-success":4===t.stat?"bg-warning":"bg-secondary"],staticStyle:{"transition-duration":"0s"},style:{width:t.progress_width},attrs:{role:"progressbar"}},[t._v("\n                    "+t._s(t.count_down)+"\n                ")])]):t._e(),s("ul",{staticClass:"list-group"},t._l(t.scores,function(e,n){return s("li",{staticClass:"list-group-item",class:{active:0===n},staticStyle:{"font-size":"40px"}},[t._v("\n                    "+t._s(e.id)+"号选手"+t._s(e.name)+":"),s("span",{staticClass:"text-success"},[t._v(t._s(e.score)+"ms")]),t._v(" \n                    "),0===n?s("v-icon",{staticStyle:{height:"40px",width:"40px"},attrs:{name:"crown"}}):t._e()],1)}),0),s("ul",{staticClass:"list-group"},t._l(t.baneds,function(e,n){return s("li",{staticClass:"list-group-item",staticStyle:{"font-size":"40px"}},[t._v("\n                    "+t._s(e.id)+"号选手"+t._s(e.name)+":"),s("span",{staticClass:"text-danger"},[t._v(t._s(e.score)+"ms")])])}),0)])])])}),x=[],S=(s("55dd"),{name:"viewer",data:function(){return{stat:0,nt:0,nr:0,count_down:0,t_sync:0,t1:0,t2:0,sig_t:0,progress_width:0,results:[],names:[]}},computed:{stat_text:function(){return 0===this.stat?"":1===this.stat?"倒计时":2===this.stat?"抢答":3===this.stat?"结束":"暂停"},scores:function(){var t=this;return this.results.reduce(function(e,s,n){return s>0&&e.push({score:s,name:t.names[n],id:n+1}),e},[]).sort(function(t,e){return t.score-e.score})},baneds:function(){var t=this;return this.results.reduce(function(e,s,n){return s<0&&e.push({score:s,name:t.names[n],id:n+1}),e},[]).sort(function(t,e){return t.score-e.score})}},created:function(){var t=this;console.log("Display created!");var e=new WebSocket("ws://".concat(document.domain,":3000/msg"));e.onerror=function(){console.debug("[WS_MSG] Connect failed")},e.onclose=function(t){console.debug("[WS_MSG] WebSocket closed",t)},e.onmessage=function(e){console.debug("[WS_MSG] Message:".concat(e.data));var s=JSON.parse(e.data);t.stat=s.stat,t.stat,t.t_sync=s.ct-(new Date).getTime(),t.nt=s.nt,t.nr=s.nr,t.results=s.res};var s=new WebSocket("ws://".concat(document.domain,":3000/config"));s.onerror=function(){console.debug("[WS_COF] Connect failed")},s.onclose=function(t){console.debug("[WS_COF] WebSocket closed:",t)},s.onmessage=function(e){console.debug("[WS_COF] Message:".concat(e.data));var s=JSON.parse(e.data);t.stat=s.stat,t.names=s.names,t.t1=s.t1,t.t2=s.t2},this.act_countdown()},methods:{act_countdown:function(){if(1===this.stat||2===this.stat){var t=this.nt-((new Date).getTime()+this.t_sync);this.count_down=t>=0?t:0,this.progress_width=(1===this.stat?this.count_down/this.t1*100:this.count_down/this.t2*100)+"%"}else 3===this.stat||0===this.stat?(this.count_down=0,this.progress_width=0):(this.count_down=this.nr<this.t1?this.t1-this.nr:this.t1+this.t2-this.nr,this.progress_width=(this.nr<this.t1?this.count_down/this.t1*100:this.count_down/this.t2*100)+"%");requestAnimationFrame(this.act_countdown)}}}),k=S,j=Object(r["a"])(k,y,x,!1,null,"5fc77f54",null),O=j.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-6 mb-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body shadow pl-2 pr-2"},[s("ul",{staticClass:"list-group list-group-horizontal d-flex flex-wrap p-0"},[0!==t.count_down?s("li",{staticClass:"list-group-item flex-fill mb-2"},[t._v("\n                            倒计时\n                            "),s("div",{staticClass:"alert alert-secondary"},[t._v("\n                                "+t._s(t.count_down)+"毫秒\n                            ")])]):t._e(),s("li",{staticClass:"list-group-item flex-fill mb-2"},[t._v("\n                            当前状态\n                            "),s("div",{staticClass:"alert alert-secondary"},[t._v("\n                                "+t._s(t.stat_str)+"\n                            ")])])])])])]),s("div",{staticClass:"col-12 col-md-6 mb-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body shadow"},[s("button",{directives:[{name:"show",rawName:"v-show",value:0===t.stat||3===t.stat,expression:"stat === 0 || stat === 3"}],staticClass:"btn btn-outline-primary mb-3 ml-3",on:{click:t.start}},[t._v("\n                        开始 "),s("v-icon",{attrs:{name:"flag"}})],1),s("button",{directives:[{name:"show",rawName:"v-show",value:1===t.stat||2===t.stat,expression:"stat === 1 || stat === 2"}],staticClass:"btn btn-outline-warning mb-3 ml-3",on:{click:t.pause}},[t._v("\n                        暂停 "),s("v-icon",{attrs:{name:"pause"}})],1),s("button",{directives:[{name:"show",rawName:"v-show",value:4===t.stat,expression:"stat === 4"}],staticClass:"btn btn-outline-success mb-3 ml-3",on:{click:t.recover}},[t._v("\n                        恢复 "),s("v-icon",{attrs:{name:"play"}})],1),s("button",{staticClass:"btn btn-outline-danger mb-3 ml-3",on:{click:t.reset}},[t._v("\n                        重置 "),s("v-icon",{attrs:{name:"stop-circle"}})],1)])])]),s("div",{staticClass:"col-12 col-md-6 mb-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body shadow pl-2 pr-2 pl-md-3 pr-md-3"},[s("div",{staticClass:"input-group mb-3"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.t1,expression:"t1"}],staticClass:"form-control",attrs:{type:"number","aria-label":"countdown","aria-describedby":"button-addon2"},domProps:{value:t.t1},on:{input:function(e){e.target.composing||(t.t1=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v("ms")]),s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.modt}},[s("v-icon",{attrs:{name:"check"}})],1)])]),s("div",{staticClass:"input-group mb-3"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.t2,expression:"t2"}],staticClass:"form-control",attrs:{type:"number","aria-label":"countdown","aria-describedby":"button-addon2"},domProps:{value:t.t2},on:{input:function(e){e.target.composing||(t.t2=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v("ms")]),s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.modt2}},[s("v-icon",{attrs:{name:"check"}})],1)])])])])]),s("div",{staticClass:"col-12 col-md-6 mb-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body shadow pl-2 pr-2 pl-md-3 pr-md-3"},[s("h5",{staticClass:"card-title"},[t._v("选手")]),s("ul",{staticClass:"list-group"},t._l(t.users,function(e,n){return s("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center pl-2 pr-2 pl-md-3 pr-md-3"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v(t._s(n+1))])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.users[n],expression:"users[idx]"}],staticClass:"form-control",attrs:{type:"text","aria-label":"name"},domProps:{value:t.users[n]},on:{input:function(e){e.target.composing||t.$set(t.users,n,e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.rename(n)}}},[s("v-icon",{attrs:{name:"check"}})],1)]),0!==t.stat&&0!==t.results[n]?s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text",class:[t.results[n]>0?"text-success":"text-danger"],attrs:{id:"basic-addon2"}},[t._v(t._s(t.results[n])+"ms")])]):t._e()])])}),0)])])])]),t._m(2)])},M=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("倒计时时间")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("抢答时间")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card fixed-bottom"},[s("div",{staticClass:"card-body shadow pt-0 pb-0"},[t._v("\n            ©"),s("a",{attrs:{href:"https://github.com/mrthanlon/spot"}},[t._v("Spot")])])])}],T={name:"console",props:{},data:function(){return{stat_str:"加载中",stat:0,count_down:0,is_start:!1,is_pause:!0,is_recov:!0,is_reset:!0,t1:"",t2:"",nt:0,t_sync:0,tmp_t:0,be_t:0,users:[],results:[],stat_text:["初始化完成","倒计时","抢答","结束","暂停"],sig_t:0}},created:function(){var t=this,e=new WebSocket("ws://".concat(document.domain,":3000/msg"));e.onerror=function(){console.debug("[WS_MSG] Connect failed")},e.onclose=function(t){console.debug("[WS_MSG] WebSocket closed",t)},e.onmessage=function(e){console.debug("[WS_MSG] Message:".concat(e.data));var s=JSON.parse(e.data);t.results=s.res,t.t_sync=s.ct-(new Date).getTime(),t.nt=s.nt,t.stat=s.stat,1!==t.stat&&2!==t.stat?(4!==t.stat&&(t.count_down=0),cancelAnimationFrame(t.sig_t)):t.act_countdown(),t.stat_str=t.stat_text[t.stat]};var s=new WebSocket("ws://".concat(document.domain,":3000/config"));s.onerror=function(){console.debug("[WS_COF] Connect failed")},s.onclose=function(t){console.debug("[WS_COF] WebSocket closed:",t)},s.onmessage=function(e){console.debug("[WS_COF] Message:".concat(e.data));var s=JSON.parse(e.data);t.stat=s.stat,t.stat_str=t.stat_text[t.stat],t.t1=s.t1,t.t2=s.t2,t.users=s.names}},methods:{rename:function(t){if(null!==this.users[t]){console.debug("http://".concat(document.domain,":8090/ctr?act=name&id=").concat(t,"&name=").concat(this.users[t]));var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){if(200!==e.status||"0"!==e.responseText)return console.debug(e.status),console.debug(e.responseText),void alert("发送失败！");this.is_start=!1,this.is_pause=!0,this.is_reset=!1,alert("发送成功！")}},e.open("get","http://".concat(document.domain,":8090/ctr?act=name&id=").concat(t,"&name=").concat(this.users[t]),!0),e.send()}else alert("发送成功")},modt:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status||"0"!==t.responseText)return console.debug(t.status),console.debug(t.responseText),void alert("发送失败！");this.is_start=!1,this.is_pause=!0,this.is_reset=!1,alert("发送成功！")}},t.open("get","http://".concat(document.domain,":8090/ctr?act=modt&val=").concat(this.t1),!0),t.send()},modt2:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status||"0"!==t.responseText)return console.debug(t.status),console.debug(t.responseText),void alert("发送失败！");this.is_start=!1,this.is_pause=!0,this.is_reset=!1,alert("发送成功！")}},t.open("get","http://".concat(document.domain,":8090/ctr?act=modt2&val=").concat(this.t2),!0),t.send()},start:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status||"0"!==t.responseText)return console.debug(t.status),console.debug(t.responseText),void alert("发送失败！");this.is_start=!1,this.is_pause=!0,this.is_reset=!1}},t.open("get","http://".concat(document.domain,":8090/ctr?act=start"),!0),t.send()},pause:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status||"0"!==t.responseText)return void alert("发送失败");this.is_pause=!0,this.is_recov=!1}},t.open("get","http://".concat(document.domain,":8090/ctr?act=pause"),!0),t.send()},recover:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status||"0"!==t.responseText)return void alert("发送失败");this.is_pause=!1,this.is_recov=!0}},t.open("get","http://".concat(document.domain,":8090/ctr?act=continue"),!0),t.send()},reset:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status||"0"!==t.responseText)return void alert("发送失败");this.is_start=!1,this.is_pause=!0,this.is_recov=!0,this.is_reset=!0}},t.open("get","http://".concat(document.domain,":8090/ctr?act=reset"),!0),t.send()},act_countdown:function(){1!==this.stat&&2!==this.stat||this.count_down<0?this.count_down=0:(this.count_down=this.nt-((new Date).getTime()+this.t_sync),this.sig_t=requestAnimationFrame(this.act_countdown))}}},E=T,$=Object(r["a"])(E,W,M,!1,null,"2766f557",null),F=$.exports;n["a"].use(l["a"]);var N=new l["a"]({routes:[{path:"/",name:"viewer",component:O},{path:"/ctr",name:"console",component:F}]}),H=(s("d06d"),s("0874"));n["a"].component("v-icon",H["a"]),n["a"].config.productionTip=!1,new n["a"]({router:N,render:function(t){return t(u)}}).$mount("#app")},"64a9":function(t,e,s){},c6fc:function(t,e,s){"use strict";var n=s("db98"),a=s.n(n);a.a},cf05:function(t,e,s){t.exports=s.p+"img/logo.82b9c7a5.png"},db98:function(t,e,s){}});
//# sourceMappingURL=app.44eb116f.js.map